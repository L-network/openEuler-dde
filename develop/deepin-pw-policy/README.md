# pw_policy

#### 介绍

openEuler 使用 pam 做为操作系统的认证模块，普通登陆，ssh登陆等等都会使用pam进行认证。但是pam的配置非常复杂，并且支持可插拔特性，导致运维管理员去配置认证策略非常复杂。期望提供一款易用的dde桌面应用pw_policy，简化密码策略配置。

pw_policy前端使用pyqt开发，后端对pam文件进行修改。

#### 配置策略

pw_policy分成普通登录配置策略、ssh登录配置策略和口令复杂度三部分，目前配置策略如下：

| ssh登录配置策略             |
| --------------------------- |
| 连续登录最大失败次数        |
| 失败锁定时间                |
| 是否禁止root用户经过SSH登陆 |

| 普通登录配置策略                     |
| ------------------------------------ |
| 是否限制用户登录到root用户           |
| 连续登录最大失败次数，失败后锁定时间 |

| 口令复杂度配置策略                 |
| ---------------------------------- |
| 配置口令最少长度                   |
| 最少字符组合                       |
| 大小写字母、数字、特殊字符最少个数 |
| 修改最多尝试次数                   |
| 不能修改为过去几次内使用过的旧口令 |

#### pam文件修改方式

按先删除再添加的策略。

遍历文件第一遍，删除已有的配置行。

遍历文件第二遍，在特定位置插入配置行。

